<header class="header" role="banner">
  <div class="headerLeft">
    <div class="logoContainer" [routerLink]="'/home'" role="link" aria-label="Home">
      <img src="assets/images/logo1.png" alt="Company Logo" />
    </div>
    <button class="sidebarToggle" (click)="toggleSidebar()" aria-label="Toggle Sidebar">
      <i class="fa-solid fa-bars"></i>
    </button>    
    <!-- Search box -->
    <div class="searchInputContainer" role="search">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="onSearch($event)" 
        placeholder="Search..." 
        aria-label="Search products" 
      />
      <div class="inputCloseSearch" *ngIf="searchTerm" (click)="clearSearch()" aria-label="Clear Search">
        <i class="fa-solid fa-xmark" aria-label="Close Search"></i>
      </div>

      <div class="searchRecentModal" *ngIf="productByKeyword.length > 0" aria-live="polite">
        <div class="listofRecent" *ngFor="let pbk of productByKeyword">
          <h3 (click)="navigateToProduct(pbk.productId)">
            {{ pbk.productName }}
          </h3>
        </div>
      </div>
    </div>
  </div>

  <div class="headerRight">
    <div class="becomeSupplierContainer">
      <p routerLink="/auth/signup">Ragister</p>
    </div>

    <div class="profileAndCart">
      <div class="downloadContainer">
        <div class="mobileIcon top">
          <img src="assets/img/user.png" alt="User Icon" />
        </div>
        <p style="font-weight: 500; font-size: 15px !important;">{{ isLoggedIn ? userName : 'Profile' }}</p>
        <div class="downloadHoverBtnContainer">
          <a *ngIf="!isLoggedIn" [routerLink]="'/auth/signin'">
            <button class="downloadBtn">Sign In</button>
          </a>
          <a *ngIf="isLoggedIn" (click)="signOut()">
            <button class="downloadBtn">Sign Out</button>
          </a>
          <a [routerLink]="'/usershop/order-history'">
            <button class="downloadBtn">My Order</button>
          </a>
        </div>
      </div>
    </div>

    <div class="CartContainer" (click)="onAddToCart()" style="cursor: pointer;">
      <div class="CartIcon top">
        <img src="assets/img/cart.png" alt="Cart Icon" />
        <div *ngIf="cartQuantity > 0" class="cart-quantity">{{ cartQuantity }}</div>
      </div>
    </div>
  </div>
</header>

<!-- Sidebar Navigation -->
<aside class="sidebar" [class.active]="isSidebarOpen" role="complementary">
  <button class="closeSidebar" (click)="toggleSidebar()" aria-label="Close Sidebar">
    <i class="fa-solid fa-xmark"></i>
  </button>
  <ul class="list-group">
    <li class="headerName" *ngFor="let c of mainCategory" (click)="toggleSubCategory(c.categoryID)">
      {{ c.categoryName }}
      <div class="subMenu" [class.show]="isSubCategoryVisible[c.categoryID]">
        <div *ngFor="let subcat of subCategory[c.categoryID]">
          <div class="submenuItem" (click)="toggleDropdown(subcat.categoryID); $event.stopPropagation()">
            <a [routerLink]="['/subcategory', subcat.categoryID]">{{ subcat.categoryName }}</a>
            
            <!-- <span *ngIf="subcat.subSubCategories?.length">â–¼</span> -->
          </div>
          
        </div>
      </div>
    </li>
  </ul>
</aside>







<!-- Navigation -->
<nav role="navigation">
  <ul>
    <li *ngFor="let c of mainCategory" (click)="toggleSubCategory(c.categoryID)">
      {{ c.categoryName }}
      <div class="subMenunormal" *ngIf="isSubCategoryVisible[c.categoryID]">
        <div class="submenuListnormal" *ngFor="let subcat of subCategory[c.categoryID]">
          <a [routerLink]="['/subcategory', subcat.categoryID]">{{ subcat.categoryName }}</a>
        </div>
      </div>
    </li>
  </ul>
</nav>
