<header class="header">
  <div class="headerLeft">
    <div class="logoContainer" [routerLink]="'/home'">
      <img src="assets/images/logo1.png" alt="Logo" />
    </div>

    <!-- Search box -->
    <div class="searchInputContainer">
      <div class="searchIcon">
        <img src="assets/img/search.png" alt="Search Icon" />
      </div>
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="onSearch($event)" 
        placeholder="Search..."
        aria-label="Search" 
      />
      <div class="inputCloseSearch" *ngIf="searchTerm" (click)="clearSearch()">
        <i class="fa-solid fa-xmark" id="closeSearch" aria-label="Close Search"></i>
      </div>

      <div class="searchRecentModal" *ngIf="productByKeyword.length > 0">
        <div class="listofRecent" *ngFor="let pbk of productByKeyword">
          <h3 (click)="navigateToProduct(pbk.productId)">
            {{ pbk.productName }}
          </h3>
        </div>
      </div>
    </div>
  </div>

  <div class="headerRight">
    <div class="becomeSupplierContainer">
      <p>Become a seller</p>
    </div>

    <div class="profileAndCart">
      <div class="downloadContainer">
        <div class="mobileIcon top">
          <img src="assets/img/user.png" alt="User Icon" />
        </div>
        <!-- Show username if logged in, otherwise show "Profile" -->
        <p>{{ isLoggedIn ? userName : 'Profile' }}</p>

        <div class="downloadHoverBtnContainer">
          <!-- If logged in, show username and sign-out button -->
          <p *ngIf="isLoggedIn">{{ userName }}</p>
          <!-- If not logged in, prompt the user to sign in -->
          <p *ngIf="!isLoggedIn" style="font-size: 13px;">To access your account</p>

          <a *ngIf="!isLoggedIn" [routerLink]="'/auth/signin'">
            <button class="downloadBtn">Sign In</button>
          </a>
          <a *ngIf="isLoggedIn" (click)="signOut()">
            <button class="downloadBtn">Sign Out</button>
          </a>
          <hr />
          <a [routerLink]="'/usershop/order-history'">
            <button class="downloadBtn">My Order</button>
          </a>
        </div>
      </div>
    </div>

    <!-- Cart section -->
    <div class="CartContainer" (click)="onAddToCart()" style="cursor: pointer;">
      <div class="CartIcon top">
        <img src="assets/img/cart.png" alt="Cart Icon" />
        <!-- Show cart quantity only if greater than 0 -->
        <div *ngIf="cartQuantity > 0" class="cart-quantity">{{ cartQuantity }}</div>
      </div>
    </div>
  </div>
</header>

<!-- Navigation bar with categories and subcategories -->
<nav>
  <ul>
    <!-- Main categories -->
    <li *ngFor="let c of mainCategory" 
        (mouseenter)="loadSubCategory(c.categoryID)"
        (mouseleave)="hideSubCategory(c.categoryID)">
      {{ c.categoryName }}
      
      <!-- Subcategories dropdown -->
      <div class="subMenu" *ngIf="subCategory[c.categoryID] && isSubCategoryVisible[c.categoryID]">
        <div class="submenuList" *ngFor="let subcat of subCategory[c.categoryID]">
          <a [routerLink]="['/subcategory', subcat.categoryID]">{{ subcat.categoryName }}</a>
        </div>
      </div>
    </li>
  </ul>
</nav>
